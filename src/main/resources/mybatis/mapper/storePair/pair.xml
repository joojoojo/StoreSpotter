<!--<?xml version="1.0" encoding="UTF-8" ?>-->
<!--<!DOCTYPE mapper-->
<!--        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"-->
<!--        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">-->
<!--<mapper namespace="com.sojoo.StoreSpotter.dao.apiToDb.StoreInfoMapper">-->

<!--&lt;!&ndash; SQL 쿼리 작성 &ndash;&gt;-->
<!--    <insert id="insertConvPair" keyProperty="bizesId" parameterType="map">-->
<!--        SELECT-->
<!--        a.bizes_id AS st_cafe_id,-->
<!--        a.bizes_nm AS st_cafe_nm,-->
<!--        b.bizes_id AS con_cafe_id,-->
<!--        b.bizes_nm AS con_cafe_nm,-->
<!--        a.coordinates AS st_cafe_coordinates,-->
<!--        b.coordinates AS con_cafe_coordinates,-->
<!--        ST_Distance_Sphere(a.coordinates, b.coordinates) AS distance-->
<!--        FROM-->
<!--        convenience_store a-->
<!--        JOIN (-->
<!--        SELECT-->
<!--        x.bizes_id AS st_cafe_id,-->
<!--        y.bizes_id AS con_cafe_id-->
<!--        FROM-->
<!--        convenience_store x-->
<!--        JOIN convenience_store y ON x.bizes_id <> y.bizes_id-->
<!--        GROUP BY x.bizes_id-->
<!--        HAVING MIN(ST_Distance_Sphere(x.coordinates, y.coordinates)) = ST_Distance_Sphere(x.coordinates, y.coordinates)-->
<!--        ) AS closest ON a.bizes_id = closest.st_cafe_id-->
<!--        JOIN convenience_store b ON closest.con_cafe_id = b.bizes_id-->
<!--    </select>-->
<!--</mapper>-->
